# Tests

–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω—ã–µ —Ç–µ—Å—Ç—ã –¥–ª—è LotSearch Bot.

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–µ—Å—Ç–æ–≤

```
tests/
‚îú‚îÄ‚îÄ __init__.py
‚îú‚îÄ‚îÄ conftest.py           # –§–∏–∫—Å—Ç—É—Ä—ã –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è pytest
‚îú‚îÄ‚îÄ test_models.py        # –¢–µ—Å—Ç—ã –º–æ–¥–µ–ª–µ–π –¥–∞–Ω–Ω—ã—Ö
‚îî‚îÄ‚îÄ test_parser.py        # –¢–µ—Å—Ç—ã –ø–∞—Ä—Å–µ—Ä–∞ (+ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã —Å —Ä–µ–∞–ª—å–Ω—ã–º —Å–∞–π—Ç–æ–º)
```

## –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤

### –í—Å–µ —Ç–µ—Å—Ç—ã (–±–µ–∑ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö):
```bash
pytest
```

### –° –ø–æ–∫—Ä—ã—Ç–∏–µ–º –∫–æ–¥–∞:
```bash
pytest --cov=. --cov-report=html
```

### –¢–æ–ª—å–∫–æ –±—ã—Å—Ç—Ä—ã–µ —Ç–µ—Å—Ç—ã (–±–µ–∑ —Ä–µ–∞–ª—å–Ω–æ–≥–æ —Å–∞–π—Ç–∞):
```bash
pytest -m "not integration"
```

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã (–ø—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∞–ª—å–Ω–æ–≥–æ —Å–∞–π—Ç–∞):
```bash
pytest -m integration
```

### –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Ñ–∞–π–ª:
```bash
pytest tests/test_parser.py
```

### Verbose —Ä–µ–∂–∏–º:
```bash
pytest -v
```

## –ß—Ç–æ —Ç–µ—Å—Ç–∏—Ä—É–µ—Ç—Å—è

###  test_models.py
- ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ –æ–±—ä–µ–∫—Ç–æ–≤ Item
- ‚úÖ –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –ø–æ URL
- ‚úÖ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ set (hashable)

### üåê test_parser.py
- ‚úÖ –ü–∞—Ä—Å–∏–Ω–≥ –≤–∞–ª–∏–¥–Ω–æ–≥–æ HTML
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –ø—É—Å—Ç–æ–≥–æ/–Ω–µ–≤–∞–ª–∏–¥–Ω–æ–≥–æ HTML
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–µ–ø–æ–ª–Ω—ã—Ö –∫–∞—Ä—Ç–æ—á–µ–∫ —Ç–æ–≤–∞—Ä–æ–≤
- ‚úÖ –ü–æ–ª—É—á–µ–Ω–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã (—É—Å–ø–µ—Ö/–æ—à–∏–±–∫–∞/—Ç–∞–π–º–∞—É—Ç)
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è get_items_from_url
- ‚úÖ **–ö–†–ò–¢–ò–ß–ù–û:** –î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å —Ä–µ–∞–ª—å–Ω–æ–≥–æ —Å–∞–π—Ç–∞ (integration)
- ‚úÖ **–ö–†–ò–¢–ò–ß–ù–û:** –ü–∞—Ä—Å–∏–Ω–≥ —Ä–µ–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö (integration)

## –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω—ã–µ —Ç–µ—Å—Ç—ã

–¢–µ—Å—Ç—ã, –ø–æ–º–µ—á–µ–Ω–Ω—ã–µ –∫–∞–∫ `@pytest.mark.integration`, –ø—Ä–æ–≤–µ—Ä—è—é—Ç —Ä–∞–±–æ—Ç—É —Å **—Ä–µ–∞–ª—å–Ω—ã–º —Å–∞–π—Ç–æ–º**:

1. **test_real_website_accessible** - –ø—Ä–æ–≤–µ—Ä—è–µ—Ç, —á—Ç–æ —Å–∞–π—Ç –¥–æ—Å—Ç—É–ø–µ–Ω
2. **test_real_website_parsing** - –ø—Ä–æ–≤–µ—Ä—è–µ—Ç, —á—Ç–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å–∞–π—Ç–∞ –Ω–µ –∏–∑–º–µ–Ω–∏–ª–∞—Å—å

‚ö†Ô∏è **–≠—Ç–∏ —Ç–µ—Å—Ç—ã –¥–æ–ª–∂–Ω—ã –ø—Ä–æ—Ö–æ–¥–∏—Ç—å –ø–µ—Ä–µ–¥ –∫–∞–∂–¥—ã–º –¥–µ–ø–ª–æ–µ–º!**

## –§–∏–∫—Å—Ç—É—Ä—ã (conftest.py)

- `mock_env_vars` - –º–æ–∫ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è –¥–ª—è —Ç–µ—Å—Ç–æ–≤
- `sample_html` - –æ–±—Ä–∞–∑–µ—Ü HTML —Å –∫–∞—Ä—Ç–æ—á–∫–∞–º–∏ —Ç–æ–≤–∞—Ä–æ–≤
- `invalid_html` - –æ–±—Ä–∞–∑–µ—Ü HTML –±–µ–∑ —Ç–æ–≤–∞—Ä–æ–≤

## CI/CD

–î–æ–±–∞–≤—å—Ç–µ –≤ –≤–∞—à CI/CD pipeline:

```yaml
# –ü—Ä–∏–º–µ—Ä –¥–ª—è GitHub Actions
- name: Run tests
  run: |
    pip install -r requirements.txt
    pytest -v
    pytest -m integration  # –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∞–ª—å–Ω–æ–≥–æ —Å–∞–π—Ç–∞
```
