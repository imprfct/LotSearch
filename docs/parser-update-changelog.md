# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–∞—Ä—Å–µ—Ä–∞ - Changelog

## –î–∞—Ç–∞: 11 –æ–∫—Ç—è–±—Ä—è 2025

### ‚ùå –ü—Ä–æ–±–ª–µ–º–∞
–ü–∞—Ä—Å–µ—Ä –Ω–µ –Ω–∞—Ö–æ–¥–∏–ª —Ç–æ–≤–∞—Ä—ã –Ω–∞ —Å–∞–π—Ç–µ coins.ay.by. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ HTML –∏–∑–º–µ–Ω–∏–ª–∞—Å—å.

### üîç –ê–Ω–∞–ª–∏–∑
- **–°—Ç–∞—Ä–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞**: `<div class="product-card">` —Å –ø–æ–¥—ç–ª–µ–º–µ–Ω—Ç–∞–º–∏ `.product-card__name`, `.product-card__image`, `.product-card__price`
- **–ù–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞**: `<div class="item-type-card__card">` —Å –¥—Ä—É–≥–æ–π –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–µ–π —ç–ª–µ–º–µ–Ω—Ç–æ–≤

### ‚úÖ –†–µ—à–µ–Ω–∏–µ

#### –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ `services/parser.py`:

1. **–ü–æ–∏—Å–∫ –∫–∞—Ä—Ç–æ—á–µ–∫ —Ç–æ–≤–∞—Ä–æ–≤**:
   ```python
   # –ë—ã–ª–æ:
   soup.find_all('div', class_='product-card')
   
   # –°—Ç–∞–ª–æ:
   soup.find_all('div', class_='item-type-card__card')
   ```

2. **–ò–∑–≤–ª–µ—á–µ–Ω–∏–µ —Å—Å—ã–ª–∫–∏ –∏ –Ω–∞–∑–≤–∞–Ω–∏—è**:
   ```python
   # –ë—ã–ª–æ:
   link_tag = card.find('a', class_='product-card__name')
   
   # –°—Ç–∞–ª–æ:
   link_tag = card.find('a', href=lambda x: x and '/lot/' in x)
   ```

3. **–ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è**:
   ```python
   # –ë—ã–ª–æ:
   img_tag = card.find('img', class_='product-card__image')
   
   # –°—Ç–∞–ª–æ:
   img_tag = card.find('img')
   ```

4. **–ò–∑–≤–ª–µ—á–µ–Ω–∏–µ —Ü–µ–Ω—ã** (—Å–∞–º–æ–µ –±–æ–ª—å—à–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ):
   ```python
   # –ë—ã–ª–æ:
   price_tag = card.find('div', class_='product-card__price')
   price = price_tag.get_text(strip=True)
   
   # –°—Ç–∞–ª–æ:
   all_texts = list(card.stripped_strings)
   # –ò—â–µ–º –ø–∞—Ä—É: —á–∏—Å–ª–æ + "–±–µ–ª. —Ä—É–±."
   for i, text in enumerate(all_texts):
       if i == 0:  # –ü—Ä–æ–ø—É—Å–∫–∞–µ–º –Ω–∞–∑–≤–∞–Ω–∏–µ
           continue
       clean_text = text.replace(',', '').replace('.', '').replace(' ', '')
       if clean_text.isdigit():
           if i + 1 < len(all_texts) and '—Ä—É–±' in all_texts[i+1].lower():
               price = f"{text} {all_texts[i+1]}"
               break
   ```

5. **–û–±—Ä–∞–±–æ—Ç–∫–∞ URL**:
   ```python
   # –ë—ã–ª–æ:
   link = 'https://coins.ay.by' + link_tag.get('href')
   
   # –°—Ç–∞–ª–æ:
   link = link_tag.get('href')
   if not link.startswith('http'):
       link = 'https://ay.by' + link
   ```

### üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã

- ‚úÖ –ü–∞—Ä—Å–µ—Ä –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –∏–∑–≤–ª–µ–∫–∞–µ—Ç 29 —Ç–æ–≤–∞—Ä–æ–≤
- ‚úÖ –ù–∞–∑–≤–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞ –∏–∑–≤–ª–µ–∫–∞–µ—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ
- ‚úÖ –¶–µ–Ω–∞ —Ñ–æ—Ä–º–∞—Ç–∏—Ä—É–µ—Ç—Å—è –∫–∞–∫ "135,01 –±–µ–ª. —Ä—É–±."
- ‚úÖ –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏–∑–≤–ª–µ–∫–∞—é—Ç—Å—è
- ‚úÖ URL –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ (ay.by –≤–º–µ—Å—Ç–æ coins.ay.by)
- ‚úÖ –í—Å–µ —Ç–µ—Å—Ç—ã –æ–±–Ω–æ–≤–ª–µ–Ω—ã –∏ –ø—Ä–æ—Ö–æ–¥—è—Ç

### üß™ –¢–µ—Å—Ç—ã

–û–±–Ω–æ–≤–ª–µ–Ω—ã —Ç–µ—Å—Ç–æ–≤—ã–µ —Ñ–∏–∫—Å—Ç—É—Ä—ã –≤ `tests/conftest.py` –∏ `tests/test_parser.py`:
- –ò–∑–º–µ–Ω–µ–Ω–∞ HTML —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –≤ `sample_html`
- –û–±–Ω–æ–≤–ª–µ–Ω—ã –æ–∂–∏–¥–∞–µ–º—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è (URL, —Ü–µ–Ω—ã)
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ–º–µ–Ω–∞ (ay.by –≤–º–µ—Å—Ç–æ coins.ay.by)

### üìù –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

- –î–æ–º–µ–Ω –∏–∑–º–µ–Ω–∏–ª—Å—è: `coins.ay.by` ‚Üí `ay.by`
- –ù–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–æ–ª–µ–µ –≥–∏–±–∫–∞—è –∏ –æ—Å–Ω–æ–≤–∞–Ω–∞ –Ω–∞ –ø–æ–∏—Å–∫–µ –ø–æ —Å–æ–¥–µ—Ä–∂–∏–º–æ–º—É
- –ü–∞—Ä—Å–µ—Ä —Ç–µ–ø–µ—Ä—å —É—Å—Ç–æ–π—á–∏–≤–µ–µ –∫ –∏–∑–º–µ–Ω–µ–Ω–∏—è–º CSS –∫–ª–∞—Å—Å–æ–≤
