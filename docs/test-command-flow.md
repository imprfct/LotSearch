# Схема работы команды /test

```
┌─────────────────────────────────────────────────────────────┐
│                    АДМИН ОТПРАВЛЯЕТ                          │
│         /test https://coins.ay.by/page/                      │
└────────────────────────┬────────────────────────────────────┘
                         │
                         ▼
┌─────────────────────────────────────────────────────────────┐
│                  БОТ ПРОВЕРЯЕТ                               │
│  1. Это админ? ✅                                            │
│  2. URL валидный? ✅                                         │
└────────────────────────┬────────────────────────────────────┘
                         │
                         ▼
┌─────────────────────────────────────────────────────────────┐
│              ОТПРАВКА СТАТУСА                                │
│  "⏳ Проверяю URL..."                                        │
└────────────────────────┬────────────────────────────────────┘
                         │
                         ▼
┌─────────────────────────────────────────────────────────────┐
│                  ПАРСИНГ                                     │
│  Parser().get_items_from_url(url)                            │
│  ├─ Запрос страницы                                          │
│  ├─ Парсинг HTML                                             │
│  └─ Извлечение товаров                                       │
└────────────────────────┬────────────────────────────────────┘
                         │
                         ▼
┌─────────────────────────────────────────────────────────────┐
│             РЕЗУЛЬТАТ ПАРСИНГА                               │
│  Найдено товаров: N                                          │
└────────────────────────┬────────────────────────────────────┘
                         │
         ┌───────────────┴────────────────┐
         │                                │
         ▼                                ▼
  ╔════════════╗                  ╔════════════╗
  ║  Товаров   ║                  ║  Товаров   ║
  ║    НЕТ     ║                  ║    ЕСТЬ    ║
  ╚════════════╝                  ╚════════════╝
         │                                │
         ▼                                ▼
┌─────────────────┐          ┌──────────────────────────┐
│ ⚠️ Сообщение:   │          │ ✅ Отправка товаров:     │
│ "Не найдено     │          │                          │
│  ни одного      │          │ Для каждого товара:      │
│  товара"        │          │ ├─ 📸 Фото               │
└─────────────────┘          │ ├─ 📝 Название           │
                              │ ├─ 💰 Цена               │
                              │ └─ 🔗 Ссылка             │
                              └────────────┬─────────────┘
                                           │
                                           ▼
                              ┌──────────────────────────┐
                              │ ✅ Финальное сообщение:  │
                              │ "Тест завершён!          │
                              │  Отправлено: N товаров"  │
                              └──────────────────────────┘
```

## Особенности

- **Приватность**: Результаты видны только запросившему админу
- **Асинхронность**: Не блокирует работу бота
- **Обработка ошибок**: Корректно обрабатывает все исключения
- **Логирование**: Все действия записываются в лог
- **Валидация**: Проверка прав доступа и формата URL

## Примеры использования

### ✅ Успешный тест
```
Админ: /test https://coins.ay.by/sssr/
Бот:   ⏳ Проверяю URL...
Бот:   ✅ Найдено товаров: 25
Бот:   [25 сообщений с фото товаров]
Бот:   ✅ Тест завершён! Отправлено: 25 товар(ов)
```

### ❌ Пустая страница
```
Админ: /test https://coins.ay.by/empty/
Бот:   ⏳ Проверяю URL...
Бот:   ⚠️ Не найдено ни одного товара!
       Возможно, структура сайта изменилась
```

### ❌ Неверный формат
```
Админ: /test coins.ay.by
Бот:   ❌ URL должен начинаться с http:// или https://
```

### ❌ Не указан URL
```
Админ: /test
Бот:   ❌ Использование: /test URL
       Пример: /test https://coins.ay.by/...
```
